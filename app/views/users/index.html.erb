<% set_page_title(t("users.index.title")) %>
<h1 class="govuk-heading-l"><%= t("users.index.title") %></h1>

<% if users.any? %>
  <%= govuk_table do |table| %>
    <%= table.with_caption(size: 'm', text: t("users.index.users_caption")) %>

    <%= table.with_head do |head|
      head.with_row do |row|
        row.with_cell(header: true, text: t("users.index.table_headings.name"))
        row.with_cell(header: true, text: t("users.index.table_headings.email"))
        row.with_cell(header: true, text: t("users.index.table_headings.organisation"))
        row.with_cell(header: true, text: t("users.index.table_headings.role"))
      end
    end %>

    <%= table.with_body do |body|
      users.each do |user|
        body.with_row do |row|
          row.with_cell do
            govuk_link_to(user.name, edit_user_path(user))
          end
          row.with_cell( text: user.email)
          row.with_cell( text: user.organisation&.name || t("users.index.organisation_blank"))
          row.with_cell( text: t("users.roles.#{user.role}.name"))
        end
      end
    end %>
  <% end %>
<% end %>

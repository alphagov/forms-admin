<% set_page_title(title_with_error_prefix(t('page_titles.routes_show', position: page.position), false)) %>
<% content_for :back_link, govuk_back_link_to(back_link_url, t('pages.go_to_your_questions')) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l">
          <span class="govuk-caption-l"><%= current_form.name %></span>
          <%= t("page_titles.routes_show", position: page.position) %>
      </h1>

      <%= govuk_summary_list(actions: false) do |summary_list|
          summary_list.with_row do |row|
              row.with_key { t("page_route_card.question_title", position: page.position) }
              row.with_value { "#{page.question_text}" }
          end;
      end %>

      <% RouteSummaryCardDataPresenter.new(form: current_form, page:, pages:, routes:).summary_card_data.each do |card| %>
          <%= govuk_summary_list(**card) %>
      <% end %>

      <% if routes.map(&:secondary_skip?).none? %>
        <h2 class="govuk-heading-m"><%= t(".any_other_answer.heading") %></h2>

        <p class="govuk-body"><%= t(".any_other_answer.will_continue_to", next_page_position: next_page.position) %></p>

        <% if FeatureService.new(group: current_form.group).enabled? :branch_routing %>
          <p class="govuk-body"><%= t(".any_other_answer.skip_later") %></p>

          <%= govuk_button_link_to t(".any_other_answer.set_questions_to_skip"), new_secondary_skip_path(current_form.id, page.id), secondary: true %>
        <% end %>
      <% end %>

      <% if routes.many? %>
        <%= govuk_button_link_to t("page_route_card.delete_route"), delete_routes_path(current_form.id, page.id), warning: true %>
      <% end %>

      <p class="govuk-body">
        <%= govuk_link_to t("pages.go_to_your_questions"), form_pages_path(current_form.id) %>
      </p>
</div>

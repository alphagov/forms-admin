<%= form_with(model: @group_select, method: :patch, url:) do |f| %>
  <% if @group_select&.errors.any? %>
    <%= f.govuk_error_summary %>
  <% end %>

  <% if @group_select.groups.length < 11 %>
    <%= f.govuk_collection_radio_buttons(:group,
                                         @group_select.groups,
                                         :id, ->(option) { option.name },
                                         legend: { text: 'What group do you want to move it to?', size: 'm', tag: 'h2' },
                                         'data-test-id': 'group-radio'
                                        ) %>
  <% elsif @group_select.groups.length < 31 %>
    <%= f.govuk_collection_select(:group,
                                  @group_select.groups,
                                  :id, ->(option) { option.name },
                                  class: ['govuk-!-width-three-quarters'],
                                  options: { prompt: "prompt" },
                                  label: { text: 'What group do you want to move it to?', size: 'm', tag: 'h2' },
                                  'data-test-id': 'group-select'
                                 ) %>
  <% else %>
    <%= render DfE::Autocomplete::View.new(f,
      attribute_name: :group,
      form_field: f.govuk_collection_select(:group,
        @group_select.groups,
        :id,
        ->(option) { option.name },
        class: ['govuk-!-width-three-quarters'],
        options: { prompt: "prompt" },
        label: { text: 'What group do you want to move it to?', size: 'm', tag: 'h2' },
      ),
      html_attributes: { 'data-show-all-values' => 'true', 'data-test-id': 'group-autocomplete' }
    ) %>
  <% end %>

<%= f.govuk_submit %>

<% end %>
